<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>無畏</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-05-14T03:10:49.723Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>李梦博</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>webpack4构建vue项目（二）</title>
    <link href="http://yoursite.com/webpack/"/>
    <id>http://yoursite.com/webpack/</id>
    <published>2019-03-01T02:32:58.000Z</published>
    <updated>2019-05-14T03:10:49.723Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>距离上篇文章9102年webpack4搭建vue项目已经过了将近两个月了，一直没有时间写文章，公司项目比较多，这两个月一直在加班，最近大家一直在讨论996.icu，其实我想发表一点自己的看法，关于加班我的座右铭一直是：只要工资给到位，加班无所谓。尴尬的就是我们公司不给加班费，而且不让调休，哈哈哈，相信大多数公司都是如此，所以呢，所以呢，直到今天才能给大家分享文章，想看上篇文章的同学点这里<code>[传送门](https://www.imooc.com/article/279078)</code><br>好了废话不多说开始撸代码。</p><h2 id="新建文件夹"><a href="#新建文件夹" class="headerlink" title="新建文件夹"></a>新建文件夹</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> wepack-vue <span class="comment">//文件名字可以随便</span></span><br></pre></td></tr></table></figure><h2 id="新建package-json文件"><a href="#新建package-json文件" class="headerlink" title="新建package.json文件"></a>新建package.json文件</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> init -y</span><br></pre></td></tr></table></figure><h2 id="webpack配置"><a href="#webpack配置" class="headerlink" title="webpack配置"></a>webpack配置</h2><ul><li>新建build文件夹<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build</span><br></pre></td></tr></table></figure></li></ul><p>build文件夹新建webpack.base.conf.js，webpack.dev.conf.js，webpack.prod.conf.js<br>webpack.base.conf.js 存放公共配置<br>webpack.prod.conf.js 存放生产环境配置<br>webpack.dev.conf.js 存放开发环境配置</p><ul><li>创建src文件夹并创建main.js</li><li>创建index.html</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack搭建vue项目<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>下载webpack webpack-dev-server webpack-cli</li></ul><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-dev-server webpack-<span class="keyword">cli</span> -<span class="built_in">D</span></span><br></pre></td></tr></table></figure><ul><li>打开webpack.base.config.js，并配置webpack整体属性</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        main: path.resolve(__dirname, <span class="string">'../src/main.js'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'../src'</span>),</span><br><span class="line">        filname: <span class="string">'[name].[bash].js'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">module</span>: &#123;</span><br><span class="line">        rules: []</span><br><span class="line">    &#125;,</span><br><span class="line">    pligins: [</span><br><span class="line">                <span class="keyword">new</span> webpack.HashedModuleIdsPlugin(), <span class="comment">// 解决vender后面的hash每次都改变</span></span><br><span class="line">             ],</span><br><span class="line">    resolve: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="配置loader"><a href="#配置loader" class="headerlink" title="配置loader"></a>配置loader</h2><ul><li>下载babel-loader，babel-core，babel-preset-dev，rules并配置js</li></ul><p>babel-preset-env 帮助我们配置 babel。我们只需要告诉它我们要兼容的情况（目标运行环境），它就会自动把代码转换为兼容对应环境的代码。</p><p>babel-core是作为babel的核心存在，babel的核心api都在这个模块里面</p><p>tips: babel是7.X的话babel-core必须是6.X，否则不兼容</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">npm</span> i <span class="keyword">babel-loader </span><span class="keyword">babel-core </span><span class="keyword">babel-preset-env@7 </span>-D</span><br></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rules:[</span><br><span class="line">    &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        use: [<span class="string">'babel-loader'</span>],</span><br><span class="line">        <span class="keyword">exclude</span>: <span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ul><li>新建.babelrc文件，.babelrc是babel全局配置文件</li></ul><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"preset"</span>: [</span><br><span class="line">                ['env',&#123;</span><br><span class="line">                        <span class="string">"targets"</span>:  &#123;// 指定转译到那个环境</span><br><span class="line">                            //浏览器环境                            </span><br><span class="line">                            <span class="string">"browsers"</span>: [<span class="string">"&gt; 1%"</span>, <span class="string">"last 2 versions"</span>, <span class="string">"not ie &lt;= 8"</span>],</span><br><span class="line">                        &#125;,</span><br><span class="line">                        //是否将ES6的模块化语法转译成其他类型</span><br><span class="line">                        <span class="string">"modules"</span>: <span class="literal">false</span></span><br><span class="line">                 &#125;]</span><br><span class="line">            ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>下载file-loader，rules并配置文件（图片和字体）</li></ul><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i <span class="keyword">file</span>-loader -<span class="built_in">D</span></span><br></pre></td></tr></table></figure><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">rules:[</span><br><span class="line">    &#123;</span><br><span class="line">        test: /\.(jpg|<span class="type">png</span>|<span class="type">svg</span>|<span class="type">gif</span>)$/,</span><br><span class="line">        use: ['file-loader']</span><br><span class="line">    &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">        test: '/\.(woff|<span class="type">woff2</span>|<span class="type">eot</span>|<span class="type">ttf</span>|<span class="type">otf</span>)$/',</span><br><span class="line">        use: ['file-loader']</span><br><span class="line">   &#125;,]</span><br></pre></td></tr></table></figure><ul><li>下载css-loader，vue-style-loader，sass-loader， node-sass，并配置css，scss，sass</li></ul><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i css-loader vue-style-loader sass-loader <span class="keyword">node</span><span class="title">-sass</span> -D</span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">rules:</span>[</span><br><span class="line">    &#123;</span><br><span class="line"><span class="symbol">        test:</span> <span class="regexp">/\.(sa|sc|c)ss$/</span>,</span><br><span class="line"><span class="symbol">        use:</span> [</span><br><span class="line">                &#123;<span class="string">loader:</span> <span class="string">'vue-style-loader'</span>&#125;,</span><br><span class="line">                <span class="string">'css-loader'</span>,</span><br><span class="line">                <span class="string">'sass-loader'</span></span><br><span class="line">              ]</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure><ul><li>下载less，less-loader，并配置less</li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i <span class="keyword">less</span>-loader <span class="keyword">less</span> -D</span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">rules:</span>[</span><br><span class="line">    &#123;</span><br><span class="line"><span class="symbol">        test:</span> <span class="regexp">/\.less$/</span>,</span><br><span class="line"><span class="symbol">        use:</span> [</span><br><span class="line">                &#123;<span class="string">loader:</span> <span class="string">'vue-style-loader'</span>&#125;,</span><br><span class="line">                <span class="string">'css-loader'</span>,</span><br><span class="line">                <span class="string">'less-loader'</span></span><br><span class="line">              ]</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure><h2 id="生成html文件"><a href="#生成html文件" class="headerlink" title="生成html文件"></a>生成html文件</h2><ul><li>下载html-webpack-plugin，并配置npm i html-webpack-plugin -D</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入html-webpack-plugin</span></span><br><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        template: path.resolve(__diename, <span class="string">'../index.html'</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="配置解析模块"><a href="#配置解析模块" class="headerlink" title="配置解析模块"></a>配置解析模块</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">resolve</span>: &#123;</span><br><span class="line">    <span class="comment">// 能够使用户在引入模块时不带扩展</span></span><br><span class="line">    <span class="attribute">extensions</span>: [<span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.vue'</span>, <span class="string">'css'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>base模块配置了一些东西但没有配置完，会在后边一点一点加上，接下来配置dev和prod</p><h2 id="配置webpack-dev-conf"><a href="#配置webpack-dev-conf" class="headerlink" title="配置webpack.dev.conf"></a>配置webpack.dev.conf</h2><ul><li>下载 webpack-merge</li></ul><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-<span class="keyword">merge</span> -<span class="built_in">D</span></span><br></pre></td></tr></table></figure><p>webpack.dev.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">var</span> baseConfig = <span class="built_in">require</span>(<span class="string">'./webpack.base.conf'</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = reuire(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = merge(baseConfig, &#123;</span><br><span class="line">    devtool: <span class="string">'inline-source-map'</span>, <span class="comment">// 压缩方式</span></span><br><span class="line">    mode: <span class="string">'development'</span></span><br><span class="line">    devServer: &#123;</span><br><span class="line">     hot: <span class="literal">true</span>, <span class="comment">// 热更新</span></span><br><span class="line">     open: <span class="literal">true</span>, <span class="comment">// 自动打开页面</span></span><br><span class="line">     contentBase: path.resolve(__dirname, <span class="string">'../dist'</span>), <span class="comment">// 告诉服务从哪提供内容</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span>.webpack.HotModuleReplacementPlugin(), <span class="comment">//开启热更新</span></span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="配置webpack-prod-conf"><a href="#配置webpack-prod-conf" class="headerlink" title="配置webpack.prod.conf"></a>配置webpack.prod.conf</h2><p>webpack.prod.conf.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">var</span> baseConfig = <span class="built_in">require</span>(<span class="string">'./webpack.base.conf'</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = reuire(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = merge(baseConfig, &#123;</span><br><span class="line">    devtool: <span class="string">'source-map'</span>, <span class="comment">// 压缩方式</span></span><br><span class="line">    mode: <span class="string">'production'</span></span><br><span class="line">    plugins: [</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="配置vue-loader"><a href="#配置vue-loader" class="headerlink" title="配置vue-loader"></a>配置vue-loader</h2><ul><li>下载vue-loader，vue，vue-template-compiler, 并配置vue解析文件，配置webpack.base.cond.js</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="selector-tag">i</span> vue vue-loader vue-template-compiler -D</span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">var VueLoaderPlugin = require(<span class="string">'vue-loader/lib/plugin'</span>);</span><br><span class="line"><span class="comment">// 省略代码......</span></span><br><span class="line"><span class="string">rules:</span>[</span><br><span class="line">    &#123;</span><br><span class="line"><span class="symbol">        test:</span> <span class="regexp">/\.vue$/</span>,</span><br><span class="line"><span class="symbol">        use:</span> [<span class="string">'vue-loader'</span>],</span><br><span class="line"><span class="symbol">        exclude:</span> <span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line"><span class="comment">// 省略代码.......</span></span><br><span class="line"><span class="comment">// 省略代码....</span></span><br><span class="line"><span class="string">plugins:</span> [</span><br><span class="line">    <span class="keyword">new</span> VueLoaderPlugin(), <span class="comment">// 它的职责是将你定义过的其它规则复制并应用到 .vue 文件里相应语言的块</span></span><br><span class="line">]</span><br><span class="line"><span class="comment">// 省略代码...</span></span><br><span class="line">配置vue别名，确保webpack可以找到.vue文件</span><br><span class="line"><span class="comment">// 省略代码...</span></span><br><span class="line"><span class="string">reslove:</span> &#123;</span><br><span class="line"><span class="symbol">    alias:</span> [</span><br><span class="line">        <span class="string">'vue$'</span>: <span class="string">'vue/dist/vue.esm.js'</span>, <span class="comment">//配置别名 确保webpack可以找到.vue文件</span></span><br><span class="line">        <span class="string">'@'</span>: path.resolve(__dirname, <span class="string">'../src'</span>)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>新建App.vue文件</li></ul><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="template-variable">&#123;&#123;str&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="xml">export default &#123;</span></span><br><span class="line"><span class="xml">  name: 'App',</span></span><br><span class="line"><span class="xml">  data () &#123;</span></span><br><span class="line"><span class="xml">    return &#123;</span></span><br><span class="line"><span class="xml">      str: 'hello'</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  &#125;&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="xml">div &#123;</span></span><br><span class="line"><span class="xml">  color: red;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>在main.js中引入vue</li></ul><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> VUe <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    render: <span class="function"><span class="params">(h)</span> =&gt;</span> h(App)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="配置命令"><a href="#配置命令" class="headerlink" title="配置命令"></a>配置命令</h2><ul><li>找到package.json文件，并配置开发和打包命令</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 省略代码。。。</span></span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"dev"</span>: <span class="string">"webpack-dev-server  --progress --config build/webpack.dev.conf.js"</span>,</span><br><span class="line">   <span class="string">"build"</span>: <span class="string">"webpack --config build/webpack.prod.conf.js"</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ul><li>运行项目</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">run</span><span class="bash"> dev</span></span><br></pre></td></tr></table></figure><p>可以看到项目已经跑起来了</p><h2 id="区分环境引入不同地址"><a href="#区分环境引入不同地址" class="headerlink" title="区分环境引入不同地址"></a>区分环境引入不同地址</h2><ul><li>新建config文件夹并新建dev.ev.js和prod.env.js</li></ul><p>dev.env.js 开发环境配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    NODE_ENV: <span class="string">'"development"'</span>,</span><br><span class="line">    BASE_API: <span class="string">'"http://1456"'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>prod.env.js 生产环境配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    NODE_ENV: <span class="string">'"production"'</span>,    <span class="attr">BASE_API</span>: <span class="string">'"http://123.com"'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="优化webpack配置"><a href="#优化webpack配置" class="headerlink" title="优化webpack配置"></a>优化webpack配置</h2><ul><li>解决更改文件打包时dist文件没有清除，再次打包。</li></ul><p>下载clean-webpack-plugin，并配置webpack.prod.conf.js文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm i clean-webpack-plugin -D</span><br><span class="line"><span class="comment">// 引入clean-webpack-plugin</span></span><br><span class="line"><span class="keyword">var</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"><span class="comment">// 省略代码。。。。</span></span><br><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebPackPlugin();</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ul><li>根据不同环境提取css</li></ul><p>下载mini-css-extract-plugin，并配置webpack.prod.conf.js文件</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mini-css-extract-<span class="keyword">plugin</span> -<span class="built_in">D</span></span><br></pre></td></tr></table></figure><p>更改webpack.prod.conf.js中使用vue-style-loader的代码，更改为</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">module</span>: &#123;</span></span><br><span class="line">       <span class="symbol">rules:</span> [</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="symbol">test:</span> /\.(c<span class="params">|sc|</span>sa)ss$/,</span><br><span class="line">               <span class="symbol">use:</span> [</span><br><span class="line">                 &#123;</span><br><span class="line">                   <span class="symbol">loader:</span> MiniCssExtractPlugin.loader,</span><br><span class="line">                 &#125;,</span><br><span class="line">                 <span class="string">'css-loader'</span>,</span><br><span class="line">                 <span class="string">'sass-loader'</span></span><br><span class="line">               ]</span><br><span class="line">           &#125;,</span><br><span class="line">           &#123;</span><br><span class="line">           <span class="symbol">test:</span> /\.less$/,</span><br><span class="line">           <span class="symbol">use:</span> [</span><br><span class="line">               &#123;</span><br><span class="line">               <span class="symbol">loader:</span> MiniCssExtractPlugin.loader,</span><br><span class="line">               &#125;,</span><br><span class="line">               <span class="string">'css-loader'</span>,</span><br><span class="line">               <span class="string">'less-loader'</span></span><br><span class="line">               ]</span><br><span class="line">           &#125;</span><br><span class="line">       ]</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure><p>在webpack.prod.conf.js的plugin中配置</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">    filename: <span class="string">'[name].[hash].js'</span></span><br><span class="line">&#125;)</span><br><span class="line">webpack.base.<span class="keyword">conf</span>.js中删除使用vue-style-loader的代码，并在webpack.dev.<span class="keyword">conf</span>.js中定义</span><br><span class="line"></span><br><span class="line">  module: &#123;</span><br><span class="line">    rule<span class="variable">s:</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        tes<span class="variable">t:</span> /\.(<span class="keyword">c</span>|sc|<span class="keyword">sa</span>)ss$/,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'vue-style-loader'</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">'css-loader'</span>,</span><br><span class="line">          <span class="string">'sass-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        tes<span class="variable">t:</span> /\.less$/,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'vue-style-loader'</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">'css-loader'</span>,</span><br><span class="line">          <span class="string">'less-loader'</span></span><br><span class="line">         ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>这个配置vue-loader中有提到<a href="https://vue-loader.vuejs.org/zh/guide/extract-css.html#webpack-4" target="_blank" rel="noopener">配置css单独打包</a></p><ul><li>第三方库单独打包</li></ul><p>把依赖的第三方库抽取出来单独打包，加快打包进度</p><p>下载autodll-webpack-plugin</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i autodll-webpack-<span class="keyword">plugin</span> -<span class="built_in">D</span></span><br></pre></td></tr></table></figure><ul><li>在webpack.base.conf.js中配置</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">AutodllWebpackpackPlugin</span> <span class="string">=</span> <span class="string">require('autodll-webpack-plugin');</span></span><br><span class="line"><span class="attr">plugins:</span> <span class="string">[</span></span><br><span class="line">    <span class="string">new</span> <span class="string">AutodllWebpackpackPlugin</span> <span class="string">(&#123;</span></span><br><span class="line"><span class="attr">        inject:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line"><span class="attr">        debugger:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line"><span class="attr">        filename:</span> <span class="string">'[name].js'</span><span class="string">,</span></span><br><span class="line"><span class="attr">        path:</span> <span class="string">'./dll'</span><span class="string">,</span></span><br><span class="line"><span class="attr">        entry:</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">            vendor:</span> <span class="string">['vue']</span></span><br><span class="line">        <span class="string">&#125;</span></span><br><span class="line">    <span class="string">&#125;)</span></span><br><span class="line"><span class="string">]</span></span><br></pre></td></tr></table></figure><p>tips: inject 为 true，插件会自动把打包出来的第三方库文件插入到 HTML。filename 是打包后文件的名称。path 是打包后的路径。entry 是入口，vendor 是你指定的名称，数组内容就是要打包的第三方库的名称，不要写全路径，Webpack 会自动去 node_modules 中找到的。</p><ul><li>提取公共代码</li></ul><p>在 webpack.base.conf.js的 plugins 属性中添加如下插件对象</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new webpack<span class="selector-class">.optimize</span><span class="selector-class">.SplitChunksPlugin</span>()</span><br></pre></td></tr></table></figure><ul><li>打包时压缩js和css</li></ul><p>下载optimize-css-assets-webpack-plugin和uglifyjs-webpack-plugin</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i uglifyjs-webpack-<span class="keyword">plugin</span> uglifyjs-webpack-<span class="keyword">plugin</span> -<span class="built_in">D</span></span><br></pre></td></tr></table></figure><p>在webpack.prod.conf.js中分别引入optimize-css-assets-webpack-plugin和uglifyjs-webpack-plugin并增加optimization</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">var</span> OptimizeCSSAssetsPlugin = <span class="keyword">require</span>(<span class="string">"optimize-css-assets-webpack-plugin"</span>);</span><br><span class="line"><span class="built_in">var</span> UglifyJsPlugin = <span class="keyword">require</span>(<span class="string">"uglifyjs-webpack-plugin"</span>);</span><br><span class="line"><span class="comment">// ...省略号 </span></span><br><span class="line">    optimization: &#123;</span><br><span class="line">                minimizer: <span class="meta">[</span></span><br><span class="line">          <span class="comment">// 压缩JS</span></span><br><span class="line">          <span class="literal">new</span> UglifyJsPlugin(&#123;</span><br><span class="line">            uglifyOptions: &#123;</span><br><span class="line">              compress: &#123;</span><br><span class="line">                warnings: <span class="literal">false</span>, <span class="comment">// 去除警告</span></span><br><span class="line">                drop_debugger: <span class="literal">true</span>, <span class="comment">// 去除debugger</span></span><br><span class="line">                drop_console: <span class="literal">true</span> <span class="comment">// 去除console.log</span></span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="keyword">cache</span>: <span class="literal">true</span>, <span class="comment">// 开启缓存</span></span><br><span class="line">            parallel: <span class="literal">true</span>, <span class="comment">// 平行压缩</span></span><br><span class="line">            sourceMap: <span class="literal">false</span> <span class="comment">// set to true if you want JS source maps</span></span><br><span class="line">          &#125;),</span><br><span class="line">          <span class="comment">// 压缩css</span></span><br><span class="line">          <span class="literal">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;)</span><br><span class="line">        <span class="meta">]</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><ul><li>css自动加前缀</li></ul><p>下载postcss-loader 和autoprefixer</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="selector-tag">i</span> postcss-loader autoprefixer -D</span><br></pre></td></tr></table></figure><p>分别在webpack.dev.conf.js和webpack.prod.conf.js的use中添加postcss-loader</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span>: [</span><br><span class="line">    <span class="string">'postcss-loader'</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>在项目下增加postcss.config.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置cssz加前缀</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上配置的项目就可以跑起来了，谢谢大家，如有错误，敬请指出，一起在码农的道路上越走越远</p><p>感恩骗点star项目地址<a href="https://github.com/mr-mengbo/webpack-vue-admin" target="_blank" rel="noopener">项目地址</a></p><p>占位<br>下一篇会介绍vue搭建后台项目</p>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot;
        
      
    
    </summary>
    
    
      <category term="webpack配置" scheme="http://yoursite.com/tags/webpack%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序转发好友</title>
    <link href="http://yoursite.com/wx/"/>
    <id>http://yoursite.com/wx/</id>
    <published>2018-03-31T16:00:00.000Z</published>
    <updated>2019-05-14T03:10:49.725Z</updated>
    
    <content type="html"><![CDATA[<p>今天简单地说下微信小程序的转发功能，为什么要简单的说下呢，因为主要讲的就是转发给好友或者群组，还有一种是分享到朋友圈，这种就比较复杂一点了，先稍微透漏一点，分享到朋友圈主要是两种方法，一种是后台直接生成海报图，一种是前端通过canvas生成海报。以后有机会再详细说，好了，言归正传继续说我们的转发好友。<br>&lt; !–more–&gt;</p><p>首先介绍一个微信小程序的API：onShareAppMessage(options)</p><p>在 Page 中定义 onShareAppMessage 函数，设置该页面的转发信息。</p><ul><li>只有定义了此事件处理函数，右上角菜单才会显示 “转发” 按钮</li><li>用户点击转发按钮的时候会调用</li><li>此事件需要 return 一个 Object，用于自定义转发内容</li></ul><p>options 参数说明</p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th><th>最低版本</th></tr></thead><tbody><tr><td>from</td><td>String</td><td>转发事件来源。button：页面内转发按钮；menu：右上角转发菜单</td><td>1.2.4</td></tr><tr><td>target</td><td>Object</td><td>如果 from 值是 button，则 target 是触发这次转发事件的 button，否则为 undefined</td><td>1.2.4</td></tr></tbody></table><p>自定义转发字段</p><table><thead><tr><th>字段</th><th>说明</th><th>默认值</th><th>最低版本</th></tr></thead><tbody><tr><td>title</td><td>转发标题</td><td>当前小程序名称</td><td>1.2.4</td></tr><tr><td>path</td><td>转发路径</td><td>当前页面 path ，必须是以 / 开头的完整路径</td></tr><tr><td>imageUrl</td><td>自定义图片路径，可以是本地文件路径、代码包文件路径或者网络图片路径，支持PNG及JPG，不传入 imageUrl 则使用默认截图。显示图片长宽比是 5:4</td><td></td><td>1.5.0</td></tr><tr><td>success</td><td>转发成功的回调函数</td><td></td><td>1.1.0</td></tr><tr><td>fail</td><td>转发失败的回调函数</td><td></td><td>1.1.0</td></tr><tr><td>complete</td><td>转发结束的回调函数（转发成功、失败都会执行）</td><td></td><td>1.1.0</td></tr></tbody></table><p>还有一个值那就是shareTickets他是转发成功返回的，并且是个数组，每一项是一个 shareTicket ，对应一个转发对象</p><p>API先说到这，接下来就是转发的实现</p><p>先看图：</p><p>首先要在onLoad中配置wx.showShareMenu<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onLoad: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  wx.showShareMenu(&#123;</span><br><span class="line">    <span class="comment">// 要求小程序返回分享目标信息</span></span><br><span class="line">    withShareTicket: <span class="literal">true</span></span><br><span class="line">  &#125;); </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>然后再配置onShareAppMessage<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 转发*/</span></span><br><span class="line">  onShareAppMessage: <span class="function"><span class="keyword">function</span> (<span class="params">ops</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ops.from === <span class="string">'button'</span>) &#123;</span><br><span class="line">      <span class="comment">// 来自页面内转发按钮</span></span><br><span class="line">      <span class="built_in">console</span>.log(ops.target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      title: <span class="string">'转发dom'</span>,</span><br><span class="line">      path: <span class="string">`pages/index/index`</span>,</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 转发成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"转发成功:"</span> + <span class="built_in">JSON</span>.stringify(res));</span><br><span class="line">        <span class="keyword">var</span> shareTickets = res.shareTickets;</span><br><span class="line">        <span class="comment">// if (shareTickets.length == 0) &#123;</span></span><br><span class="line">        <span class="comment">//   return false;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// //可以获取群组信息</span></span><br><span class="line">        <span class="comment">// wx.getShareInfo(&#123;</span></span><br><span class="line">        <span class="comment">//   shareTicket: shareTickets[0],</span></span><br><span class="line">        <span class="comment">//   success: function (res) &#123;</span></span><br><span class="line">        <span class="comment">//     console.log(res)</span></span><br><span class="line">        <span class="comment">//   &#125;</span></span><br><span class="line">        <span class="comment">// &#125;)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 转发失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"转发失败:"</span> + <span class="built_in">JSON</span>.stringify(res));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p>我解释一下wx.getShareInfo这个可以获取到获取转发详细信息</p><p>完整js代码就是<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="comment">//获取应用实例</span></span><br><span class="line"><span class="keyword">const</span> app = getApp()</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    motto: <span class="string">'Hello World'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    wx.showShareMenu(&#123;</span><br><span class="line">      <span class="comment">// 要求小程序返回分享目标信息</span></span><br><span class="line">      withShareTicket: <span class="literal">true</span></span><br><span class="line">    &#125;); </span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/* 转发*/</span></span><br><span class="line">  onShareAppMessage: <span class="function"><span class="keyword">function</span> (<span class="params">ops</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ops.from === <span class="string">'button'</span>) &#123;</span><br><span class="line">      <span class="comment">// 来自页面内转发按钮</span></span><br><span class="line">      <span class="built_in">console</span>.log(ops.target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      title: <span class="string">'转发dom'</span>,</span><br><span class="line">      path: <span class="string">`pages/index/index`</span>,</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 转发成功</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"转发成功:"</span> + <span class="built_in">JSON</span>.stringify(res));</span><br><span class="line">        <span class="keyword">var</span> shareTickets = res.shareTickets;</span><br><span class="line">        <span class="comment">// if (shareTickets.length == 0) &#123;</span></span><br><span class="line">        <span class="comment">//   return false;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// //可以获取群组信息</span></span><br><span class="line">        <span class="comment">// wx.getShareInfo(&#123;</span></span><br><span class="line">        <span class="comment">//   shareTicket: shareTickets[0],</span></span><br><span class="line">        <span class="comment">//   success: function (res) &#123;</span></span><br><span class="line">        <span class="comment">//     console.log(res)</span></span><br><span class="line">        <span class="comment">//   &#125;</span></span><br><span class="line">        <span class="comment">// &#125;)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 转发失败</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"转发失败:"</span> + <span class="built_in">JSON</span>.stringify(res));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>聪明的同学就该知道接下来该是wxml代码<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"userinfo"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">"share"</span>&gt;</span>分享好友<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"usermotto"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"user-motto"</span>&gt;</span>&#123;&#123;motto&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>友情提示一下如果点击按钮分享的话，button一定要设置open-type=”share”否则不起作用。如果觉得文章还不错并对你有帮助的话，请分享给你的小伙伴，并点赞，有什么不懂得可以在底下留言哦。如果想看源码的话可以去我的github上下载，欢迎star，[github]: <a href="https://github.com/Mr-MengBo/wx-share" target="_blank" rel="noopener">https://github.com/Mr-MengBo/wx-share</a></p>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;p&gt;今天简单地说下微信小程序的转发功能，为什么要简单的说下呢，因为主要讲的就是转发给好友或者群组，还有一种是分享到朋友圈，这种就比较复杂一点了，先稍微透漏一点，分享到朋友圈主要是两种方法，一种是后台直接生成海报图，一种是前端通过canvas生成海报。以后有机会再详细说，好了，言
        
      
    
    </summary>
    
    
      <category term="微信小程序" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>前端必备开发网站</title>
    <link href="http://yoursite.com/website/"/>
    <id>http://yoursite.com/website/</id>
    <published>2018-03-01T02:32:58.000Z</published>
    <updated>2019-05-14T03:10:49.724Z</updated>
    
    <content type="html"><![CDATA[<p>大牛博客：<br>  阮一峰博客：<a href="http://www.ruanyifeng.com/blog/" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/</a></p><p>  愚人码头博客：<a href="http://www.css88.com/" target="_blank" rel="noopener">http://www.css88.com/</a></p><p>  张鑫旭博客：<a href="http://www.zhangxinxu.com/wordpress/" target="_blank" rel="noopener">http://www.zhangxinxu.com/wordpress/</a></p><p>  勾三股四博客：<a href="http://jiongks.name/" target="_blank" rel="noopener">http://jiongks.name/</a></p><p>  前端博客：<a href="http://caibaojian.com/" target="_blank" rel="noopener">http://caibaojian.com/</a></p><p>  大漠穷秋：<a href="https://my.oschina.net/mumu/" target="_blank" rel="noopener">https://my.oschina.net/mumu/</a></p><p>视频教程：<br>   极客学院：<a href="http://www.jikexueyuan.com/" target="_blank" rel="noopener">http://www.jikexueyuan.com/</a></p><p>   慕课网视频教程： <a href="http://www.imooc.com/" target="_blank" rel="noopener">http://www.imooc.com/</a></p><p>前端社区：<br>  前端网: <a href="http://www.qdfuns.com/" target="_blank" rel="noopener">http://www.qdfuns.com/</a></p><p>  frontopen：<a href="http://www.frontopen.com/" target="_blank" rel="noopener">http://www.frontopen.com/</a></p><p>  w3cplus：<a href="http://www.w3cplus.com/" target="_blank" rel="noopener">http://www.w3cplus.com/</a></p><p>  大前端：<a href="http://www.daqianduan.com/" target="_blank" rel="noopener">http://www.daqianduan.com/</a></p><p>  伯乐在线：<a href="http://www.jobbole.com/" target="_blank" rel="noopener">http://www.jobbole.com/</a></p><p>  前端里：<a href="http://www.yyyweb.com/" target="_blank" rel="noopener">http://www.yyyweb.com/</a></p><p>  爱思资源网：<a href="http://www.aseoe.com/" target="_blank" rel="noopener">http://www.aseoe.com/</a></p><p>  前端观察：<a href="https://www.qianduan.net/" target="_blank" rel="noopener">https://www.qianduan.net/</a></p><p>  前端开发俱乐部：<a href="http://www.html-js.cn/" target="_blank" rel="noopener">http://www.html-js.cn/</a></p><p>前端工具类汇总：<br>  前端开发仓库：<a href="http://code.ciaoca.com/" target="_blank" rel="noopener">http://code.ciaoca.com/</a></p><p>  极客学院wiki：<a href="http://wiki.jikexueyuan.com/" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/</a></p><p>  前端在线编辑器：<a href="http://runjs.cn/code" target="_blank" rel="noopener">http://runjs.cn/code</a></p><p>  Bootstrap中文网开源项目免费CDN：<a href="http://www.bootcdn.cn/" target="_blank" rel="noopener">http://www.bootcdn.cn/</a></p><p>程序员综合：<br>  github：<a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></p><p>  开源中国：<a href="https://www.oschina.net/" target="_blank" rel="noopener">https://www.oschina.net/</a></p><p>  CSDN：<a href="http://www.csdn.net/" target="_blank" rel="noopener">http://www.csdn.net/</a></p><p>  博客园：<a href="http://www.cnblogs.com/" target="_blank" rel="noopener">http://www.cnblogs.com/</a></p><p>框架文章：<br>  VUE中文：vuejs.org.cn</p><p>  VUE 2.0教程：<a href="https://vuefe.cn/v2/guide/" target="_blank" rel="noopener">https://vuefe.cn/v2/guide/</a></p><p>  ReactJs中文教程：<a href="http://reactjs.cn/react/docs/getting-started-zh-CN.html" target="_blank" rel="noopener">http://reactjs.cn/react/docs/getting-started-zh-CN.html</a></p><p>  菜鸟教程：<a href="http://www.runoob.com" target="_blank" rel="noopener">www.runoob.com</a></p><p>  ECMAScript 6：<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">http://es6.ruanyifeng.com/</a></p><p>  Angularjs中文教程：<a href="http://www.apjs.net/" target="_blank" rel="noopener">http://www.apjs.net/</a></p><p>  Requirejs中文:  <a href="http://www.requirejs.cn/" target="_blank" rel="noopener">http://www.requirejs.cn/</a></p><p>  node中文网：<a href="http://cnodejs.org/getstart" target="_blank" rel="noopener">http://cnodejs.org/getstart</a></p><p>  express中文网：<a href="http://www.expressjs.com.cn/" target="_blank" rel="noopener">http://www.expressjs.com.cn/</a></p><p>预编译、打包、构建工具：<br>  less：<a href="http://less.bootcss.com/" target="_blank" rel="noopener">http://less.bootcss.com/</a></p><p>  sass：<a href="http://sass.bootcss.com/" target="_blank" rel="noopener">http://sass.bootcss.com/</a></p><p>  coffeescript：<a href="http://coffee-script.org/" target="_blank" rel="noopener">http://coffee-script.org/</a></p><p>  pugjs（也就是Jade）：<a href="https://github.com/pugjs/pug" target="_blank" rel="noopener">https://github.com/pugjs/pug</a></p><p>  babeljs：<a href="http://babeljs.cn/" target="_blank" rel="noopener">http://babeljs.cn/</a></p><p>  grunt中文网：<a href="http://www.gruntjs.net/" target="_blank" rel="noopener">http://www.gruntjs.net/</a></p><p>  gulp中文网：<a href="http://www.gulpjs.com.cn/" target="_blank" rel="noopener">http://www.gulpjs.com.cn/</a></p><p>  webpack中文网：<a href="http://webpackdoc.com/" target="_blank" rel="noopener">http://webpackdoc.com/</a></p><p>前端团队博客:<br>  腾讯前端团队:  <a href="http://www.alloyteam.com/" target="_blank" rel="noopener">http://www.alloyteam.com/</a>  <a href="https://github.com/AlloyTeam/" target="_blank" rel="noopener">https://github.com/AlloyTeam/</a></p><p>  淘宝前端团队:  <a href="http://taobaofed.org/" target="_blank" rel="noopener">http://taobaofed.org/</a>  <a href="https://github.com/taobaofed" target="_blank" rel="noopener">https://github.com/taobaofed</a></p><p>  Firefox技术文档:  <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/</a>  <a href="https://hacks.mozilla.org/" target="_blank" rel="noopener">https://hacks.mozilla.org/</a></p><p>开发工具IDE:<br>  sublime：<a href="http://www.sublimetext.com/" target="_blank" rel="noopener">www.sublimetext.com/</a></p><p>  webstorm：<a href="http://www.jetbrains.com/webstorm/" target="_blank" rel="noopener">http://www.jetbrains.com/webstorm/</a></p><p>  vscode: <a href="https://code.visualstudio.com/Download" target="_blank" rel="noopener">https://code.visualstudio.com/Download</a></p><p>  Hbuilder：<a href="http://www.dcloud.io" target="_blank" rel="noopener">www.dcloud.io</a></p><p>  IntelliJ IDEA：<a href="http://www.jetbrains.com/idea/" target="_blank" rel="noopener">http://www.jetbrains.com/idea/</a></p><p>注：资源来源于自己长期收集整理而来，如有和其他网站和论坛相同部分，在此抱歉！</p>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;p&gt;大牛博客：&lt;br&gt;  阮一峰博客：&lt;a href=&quot;http://www.ruanyifeng.com/blog/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://www.ruanyifeng.com/blog/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; 
        
      
    
    </summary>
    
    
      <category term="前端必备" scheme="http://yoursite.com/tags/%E5%89%8D%E7%AB%AF%E5%BF%85%E5%A4%87/"/>
    
  </entry>
  
</feed>
